<html>
	<head>
		<script type="text/javascript" src="jquery.min.js"></script>
		<!--<script type="text/javascript" src="weaver.js"></script>-->
		<script type="text/javascript">
			/*var editor;
			function setUpEditor() {
				//var path = chrome.extension.getURL("CodeMirror/");
				var path = "CodeMirror/";
				editor = new CodeMirror(function(iframe) { document.body.appendChild(iframe); });/*, {
					height: "100%",
					path: path,
					basefiles: "js/compiled.js",
				      //	stylesheet: [path + "css/xmlcolors.css", path + "css/jscolors.css", path + "css/csscolors.css", path + "css/phpcolors.css"],
					//tabMode: "spaces",
					continuousScanning: 500
				});*/
				//return editor.wrapping.outerHTML;
			//}
			chrome.extension.onRequest.addListener(function(request, sender, callback) {
	        		if (request.action == "getMeIndex") {
					var xhr = new XMLHttpRequest();
					xhr.open("GET", "index.html", true);
					xhr.onreadystatechange = function() {
						if (xhr.readyState == 4) {
			        			callback(xhr.responseText);
					 	}
					}
					xhr.send();
				}
			});
			//var editor = getEditor();
			chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
				//chrome.tabs.executeScript(tabId, { code: "location.href = " + });
				
				if(changeInfo.status == "complete"){
					//chrome.tabs.executeScript(tabId, { code: "document.write('');" });
					chrome.tabs.executeScript(tabId, { file: "initialize.js" });
				}
				if(changeInfo.status == "loading"){
					alert(tab.url);
				}
			});
		</script>
	</head>
	<body>
	</body>
</html>
